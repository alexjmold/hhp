<style>
  a[disabled='true'] {
    pointer-events: none;
    opacity: 0.5;
  }
</style>

{% if plans.plans %}
<div class="w-full bg-blue-200 px-5 py-6 text-gray-900">
  <div class="container md:flex" id="service-plans">
    {% for plan in plans.plans %}
    <div class="w-full md:w-1/3 px-2 mb-5 flex flex-col">
      <div
        class="w-full rounded-lg overflow-hidden bg-white shadow-lg flex-1 flex flex-col"
      >
        <div class="p-5 w-full bg-blue-500 text-white">
          <p class="text-2xl font-bold mb-3" id="plan-name">{{ plan.name }}</p>
          <p class="text-xl">{{ plan.Price }}/month</p>
        </div>
        <div class="w-full p-5 flex-1">
          <p
            class="text-xl pt-5 pb-2 font-bold uppercase text-orange-500 tracking-loose"
          >
            What's included?
          </p>
          <ul class="my-5 tick-list">
            {% for service in plan.services %}
            <li>{{service}}</li>
            {% endfor %}
          </ul>
          <ul class="my-5 tick-list">
            {% for service in plan.extras %}
            <li class="mt-2 relative extra">
              <span class="block text-orange-500 text-xs font-bold">
                Optional extra
              </span>
              {{service}}
            </li>
            {% endfor %}
          </ul>
        </div>
        <div class="text-center my-5 px-5 text-left">
          <div class="flex items-start mb-4">
            <input
              id="{{plan.name}}"
              type="checkbox"
              value=""
              class="w-6 h-6 accent-blue-500 text-blue-600 bg-blue-100 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-blue-800 dark:bg-blue-700 dark:border-blue-600"
            />
            <label for="{{plan.name}}" class="ms-2 text-sm cursor">
              By signing up to this service, you agree with our
              <a
                class="text-gray-700 text-sm underline mb-4"
                target="_blank"
                href="/static/img/heritage-heating-and-plumbing-ltd-boiler-service-plan-terms-conditions-v4.pdf"
              >
                Terms and Conditions
              </a>
            </label>
          </div>
          <a
            href="{{plan.link}}"
            class="bg-blue-500 text-white font-bold px-10 py-3 rounded-lg lg:text-lg inline-block hover:bg-blue-700 mb-5 plan-link"
            target="_blank"
            disabled="true"
          >
            Sign up
          </a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endif %}

<script lang="text/javascript">
  document.addEventListener("DOMContentLoaded", (event) => {
    const toggleLink = (checkbox, index) => {
      links[index].setAttribute('disabled', !checkbox.checked)
    }

    const checkboxes = document.querySelectorAll('#service-plans input[type="checkbox"]')
    const links = document.querySelectorAll('#service-plans a.plan-link')

    checkboxes.forEach((checkbox, index) => {
      checkbox.addEventListener('click', () => toggleLink(checkbox, index))
    })
  });
</script>
